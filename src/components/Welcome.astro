<div
  id="principal"
  class="relative h-screen flex flex-col bg-[url('../assets/fondo1.webp')] bg-repeat bg-cover bg-center dark:bg-[url('../assets/fondo.webp')]"
>
  <header
    class="py-4 px-6 flex justify-between min-md:justify-around items-center"
  >
    <div class="font-bold text-xl text-[#525d86]">
      <a href="/" aria-label="Ir a la página principal">JesusRiv</a>
    </div>
    <nav>
      <div class="flex items-center gap-4">
        <!-- Menú de idiomas -->
        <div class="relative">
          <button
            id="lang-btn"
            class="flex items-center px-3 py-1 bg-white border border-gray-300 rounded-md text-sm focus:outline-none"
          >
            <img
              id="lang-flag"
              src="/images/es.png"
              alt="Español"
              class="w-5 h-5 rounded-full mr-2"
            />
            <span id="lang-text">Español</span>
          </button>

          <ul
            id="lang-options"
            class="absolute mt-2 w-36 right-0 bg-white border border-gray-300 rounded-md shadow-lg hidden"
          >
            <li>
              <a
                href="#"
                data-lang="es"
                class="flex items-center px-4 py-2 hover:bg-gray-100"
              >
                <img
                  src="/images/es.png"
                  alt="Español"
                  class="w-5 h-5 rounded-full mr-2"
                />
                Español
              </a>
            </li>
            <li>
              <a
                href="#"
                data-lang="en"
                class="flex items-center px-4 py-2 hover:bg-gray-100"
              >
                <img
                  src="/images/en.png"
                  alt="Inglés"
                  class="w-5 h-5 rounded-full mr-2"
                />
                Inglés
              </a>
            </li>
          </ul>
        </div>

        <button
          id="dark-toggle"
          aria-label="Alternar modo oscuro"
          class="bg-gray-800 text-white rounded-full w-8 h-8 flex items-center justify-center focus:outline-none"
        >
          <i id="dark-icon" class="fa-solid fa-moon"></i>
          <span class="sr-only">Alternar modo oscuro</span>
        </button>
      </div>
    </nav>
  </header>

  <main class="flex-grow flex justify-center items-center px-8">
    <article class="max-w-2xl text-left">
      <h2 class="text-gray-700 mb-2 min-md:text-2xl">
        ¡Hola! Mucho gusto. Me llamo
      </h2>
      <h1
        class="min-sm:text-7xl text-[#525d86] font-bold mb-4 max-[376px]:text-4xl text-5xl dark:text-white"
      >
        Jesús Rivera
      </h1>
      <div>
        <div class="my-6 text-2xl overflow-hidden">
          <h3
            id="animated-text"
            class="text-[#1e2231] font-bold whitespace-nowrap border-r-2 border-[#525d86] animate-typing max-w-full text-ellipsis min-sm:text-4xl"
          >
          </h3>
        </div>
      </div>

      <div
        class="items-center gap-2 mb-6 rounded-full border border-[#d3d3d3] inline-flex px-3 py-2"
      >
        <!-- Punto verde animado -->
        <span class="relative flex h-3 w-3">
          <span
            class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"
          ></span>
          <span
            class="relative inline-flex rounded-full h-3 w-3 bg-green-500 border border-white"
          ></span>
        </span>
        <p
          class="text-[#1e2231] font-medium text-xs sm:text-base px-2 dark:text-white"
        >
          Disponible para cualquier desafío
        </p>
      </div>

      <div class="flex flex-wrap items-center space-x-4">
        <a
          href="/cv-jesus-rivera.pdf"
          download="JesusRivera_CV"
          class="bg-[#1e2231] text-white py-2 px-6 rounded-full hover:bg-[#525d86]"
        >
          <i class="fa-solid fa-download"></i>
          Descargar CV
        </a>
        <div class="flex space-x-2 my-4">
          <a
            href="mailto:jr860086@gmail.com"
            aria-label="email"
            class="bg-gray-300 rounded-full w-10 h-10 flex items-center justify-center hover:bg-gray-400"
            target="_blank"
          >
            <i class="fa-solid fa-envelope"></i>
          </a>

          <a
            href="https://github.com/JesusRivX"
            aria-label="github"
            class="bg-gray-300 rounded-full w-10 h-10 flex items-center justify-center hover:bg-gray-400"
            target="_blank"
          >
            <i class="fa-brands fa-github"></i>
          </a>

          <a
            href="https://www.linkedin.com/in/jes%C3%BAs-rivera-04058620a/"
            aria-label="linkedin"
            class="bg-gray-300 rounded-full w-10 h-10 flex items-center justify-center hover:bg-gray-400"
            target="_blank"
          >
            <i class="fa-brands fa-linkedin"></i>
          </a>
        </div>
      </div>
    </article>
  </main>

  <aside
    class="fixed bottom-4 left-1/2 -translate-x-1/2 bg-gray-800 bg-opacity-75 rounded-full shadow-lg flex items-center justify-around py-2 px-4 z-10"
  >
    <div class="relative group">
      <a
        href="/#principal"
        aria-label="Inicio"
        class="w-10 h-10 rounded-full flex items-center justify-center focus:outline-none hover:bg-gray-700"
      >
        <i class="fa-solid fa-house" style="color: white;"></i>
        <span class="sr-only">Inicio</span>
      </a>
      <div
        class="absolute bottom-full left-1/2 -translate-x-1/2 mb-4 bg-gray-900 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition duration-200"
      >
        Inicio
      </div>
    </div>
    <div class="relative group">
      <a
        href="/#informacion"
        aria-label="Inicio"
        class="w-10 h-10 rounded-full flex items-center justify-center focus:outline-none hover:bg-gray-700"
      >
        <i class="fa-solid fa-user" style="color: white;"></i>
        <span class="sr-only">Acerca de mi</span>
      </a>
      <div
        class="absolute bottom-full left-1/2 -translate-x-1/2 mb-4 bg-gray-900 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition duration-200"
      >
        Información
      </div>
    </div>
    <div class="relative group">
      <button
        aria-label="Ver proyectos"
        class="w-10 h-10 rounded-full flex items-center justify-center focus:outline-none hover:bg-gray-700"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          class="w-6 h-6 text-white"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
        <span class="sr-only">Ver proyectos</span>
      </button>
      <div
        class="absolute bottom-full left-1/2 -translate-x-1/2 mb-4 bg-gray-900 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition duration-200"
      >
        Proyectos
      </div>
    </div>
    <div class="relative group">
      <button
        aria-label="Ir a contacto"
        class="w-10 h-10 rounded-full flex items-center justify-center focus:outline-none hover:bg-gray-700"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          class="w-6 h-6 text-white"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 6V4m0 2a2 2 0 012 2v5m-2-5a2 2 0 01-2-2V4m0 2c-1.667 0-3 1.5-3 3.5S9 13 9 13m3-7h3m-3 4h3m-6-4h.01M9 16h.01M15 16h.01"
          ></path>
        </svg>
        <span class="sr-only">Ir a contacto</span>
      </button>
      <div
        class="absolute bottom-full left-1/2 -translate-x-1/2 mb-4 bg-gray-900 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition duration-200"
      >
        Contacto
      </div>
    </div>
  </aside>
</div>

<script type="module">
  const langBtn = document.getElementById("lang-btn");
  const langMenu = document.getElementById("lang-options");
  const langText = document.getElementById("lang-text");
  const langFlag = document.getElementById("lang-flag");
  const toggleBtn = document.getElementById("dark-toggle");
  const icon = document.getElementById("dark-icon");

  toggleBtn.addEventListener("click", () => {
    if (icon.classList.contains("fa-moon")) {
      icon.classList.remove("fa-moon");
      icon.classList.add("fa-sun");
    } else {
      icon.classList.remove("fa-sun");
      icon.classList.add("fa-moon");
    }
  });

  const langData = {
    es: { text: "Español", img: "/images/es.png" },
    en: { text: "Inglés", img: "/images/en.png" },
  };

  langBtn.addEventListener("click", () => {
    langMenu.classList.toggle("hidden");
  });

  langMenu.querySelectorAll("a").forEach((link) => {
    link.addEventListener("click", (e) => {
      e.preventDefault();
      const selectedLang = link.getAttribute("data-lang");
      langText.textContent = langData[selectedLang].text;
      langFlag.src = langData[selectedLang].img;
      langMenu.classList.add("hidden");

      // Opcional: guarda idioma en localStorage
      localStorage.setItem("language", selectedLang);
    });
  });

  // Cierra el menú si haces clic fuera
  document.addEventListener("click", (e) => {
    if (!langBtn.contains(e.target) && !langMenu.contains(e.target)) {
      langMenu.classList.add("hidden");
    }
  });

  // Opcional: cargar idioma desde localStorage
  const storedLang = localStorage.getItem("language");
  if (storedLang && langData[storedLang]) {
    langText.textContent = langData[storedLang].text;
    langFlag.src = langData[storedLang].img;
  }
</script>

<style>
  @keyframes typing {
    from {
      width: 0;
    }
    to {
      width: 100%;
    }
  }
  @keyframes blink {
    50% {
      border-color: transparent;
    }
  }

  .animate-typing {
    display: inline-block;
    overflow: hidden;
    white-space: nowrap;
    animation:
      typing 2s steps(30, end),
      blink 0.75s step-end infinite;
  }
</style>

<script>
  const texts: string[] = ["Ingeniero de Software", "Desarrollador Fullstack"];
  const textElement = document.getElementById("animated-text") as HTMLElement;

  let index: number = 0;

  function animateText(): void {
    if (!textElement) return;

    textElement.classList.remove("animate-typing");
    void textElement.offsetWidth; // Forzar reflow para reiniciar la animación
    textElement.textContent = texts[index];
    textElement.classList.add("animate-typing");

    index = (index + 1) % texts.length;
  }

  // Inicializar al cargar
  animateText();

  // Cambiar cada 4 segundos
  setInterval(animateText, 4000);
</script>

<script>
  //Añadir el evento de clic al botón de alternar modo oscuro
  const storedDarkMode = document.querySelector("#dark-toggle");

  storedDarkMode?.addEventListener("click", () => {
    document.body.classList.toggle("dark");
    const isDarkMode = document.body.classList.contains("dark");
  });
</script>
